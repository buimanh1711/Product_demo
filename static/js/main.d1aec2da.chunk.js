(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{112:function(e,t,c){},113:function(e,t,c){},114:function(e,t,c){},115:function(e,t,c){},116:function(e,t,c){},117:function(e,t,c){},118:function(e,t,c){},119:function(e,t,c){},120:function(e,t,c){},121:function(e,t,c){},122:function(e,t,c){},172:function(e,t,c){"use strict";c.r(t);var a=c(1),s=c.n(a),n=c(38),i=c.n(n),r=(c(86),c(2)),l=c(7),o=(c(87),c(112),c(113),c(114),c(115),c(116),c(117),c(118),c(119),c(120),c(121),c(122),c(3)),j=function(e){return!!/^[A-Za-z\s]+$/.test(e)},d=function(e){return!!/^[a-zA-Z0-9]+$/.test(e)},b=c(0),u=function(e){var t=(e||null).status,c=Object(a.useState)(!1),s=Object(o.a)(c,2),n=s[0],i=s[1],r=Object(a.useRef)(null),l=Object(a.useRef)(null);Object(a.useEffect)((function(){l.current.focus()}));return Object(b.jsxs)("div",{className:t?"search-modal active":"search-modal",children:[Object(b.jsx)("div",{className:"search-modal-overlay",onClick:e.toggleSearchForm}),Object(b.jsxs)("div",{className:"search-form-container",children:[Object(b.jsx)("form",{ref:r,onKeyPress:function(e){"Enter"===e.key&&n&&(e.preventDefault(),r.current.submit())},action:"/search",method:"GET",children:Object(b.jsx)("input",{ref:l,autoFocus:!0,onChange:function(e){var t=e.target.value.trim();t.length>0&&function(e){return!!/^[a-zA-Z0-9!@#\$%\^\&*\)\(+=._-]+$/g.test(e)}(t)?i(!0):i(!1)},name:"q",placeholder:"What are you looking for?"})}),Object(b.jsx)("div",{className:"search-footer",children:"Please enter at least 3 characters"})]})]})},h=function(){return Object(b.jsx)("div",{className:"notification",children:Object(b.jsx)("div",{className:"notif-container",children:Object(b.jsx)("div",{className:"notif-list",children:Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{children:Object(b.jsx)(r.b,{to:"/",children:"Bui Van Manh da say hello ban."})}),Object(b.jsx)("li",{children:Object(b.jsx)(r.b,{to:"/",children:"Bui Van Manh da say hello ban. Bui Van Manh da say hello ban."})}),Object(b.jsx)("li",{children:Object(b.jsx)(r.b,{to:"/",children:"Bui Van Manh da say hello ban."})}),Object(b.jsx)("li",{children:Object(b.jsx)(r.b,{to:"/",children:"Bui Van Manh da say hello ban."})}),Object(b.jsx)("li",{children:Object(b.jsx)(r.b,{to:"/",children:"Bui Van Manh da say hello ban. Bui Van Manh da say hello ban."})}),Object(b.jsx)("li",{children:Object(b.jsx)(r.b,{to:"/",children:"Bui Van Manh da say hello ban."})}),Object(b.jsx)("li",{children:Object(b.jsx)(r.b,{to:"/",children:"Bui Van Manh da say hello ban."})}),Object(b.jsx)("li",{children:Object(b.jsx)(r.b,{to:"/",children:"Bui Van Manh da say hello ban."})}),Object(b.jsx)("li",{children:Object(b.jsx)(r.b,{to:"/",children:"Bui Van Manh da say hello ban."})})]})})})})},m=c(6),O=function(e){return e&&"null"!==e?"https://manhbui-testdeploy-mblog.herokuapp.com/upload/".concat(e):"/images/defaultimg.jpg"},g=Object(m.b)((function(e){return{web:e.web}}))((function(e){var t=e.asPath,c=e.web,s=Object(a.useState)(!1),n=Object(o.a)(s,2),i=n[0],l=n[1],j=Object(a.useState)(!1),d=Object(o.a)(j,2),m=d[0],g=d[1],f=Object(a.useState)(!1),x=Object(o.a)(f,2),p=x[0],v=x[1],N=Object(a.useState)(!1),S=Object(o.a)(N,2),y=S[0],k=S[1],w={menu:[{id:1,name:"Home",path:"/"},{id:2,name:"Post",path:"/posts"},{id:3,name:"About",path:"/about"}],childMenu:[{id:4,name:"Author",path:"/author"},{id:5,name:"About us",path:"/about-us"},{id:6,name:"user",path:"/user"}]},C=function(){v(!p)},I=function(){k(!y)};return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"header",children:[Object(b.jsxs)("div",{className:"header-container",children:[Object(b.jsx)(u,{toggleSearchForm:function(){g(!m)},status:!!m}),Object(b.jsxs)("ul",{className:"header-menu",children:[w.menu.map((function(e){return Object(b.jsx)("li",{className:e.path===t?"header-menu-item active":"header-menu-item",children:Object(b.jsx)(r.b,{to:e.path,children:e.name})},e.id)})),Object(b.jsxs)("li",{onClick:function(){l(!i)},className:"header-menu-item-icon",children:[Object(b.jsx)("i",{className:"fas fa-ellipsis-h"}),Object(b.jsx)("div",{className:i?"header-child-menu-container active":"header-child-menu-container",children:Object(b.jsx)("ul",{className:"header-child-menu",children:w.childMenu.map((function(e){return Object(b.jsx)("li",{className:"header-child-menu-item",children:Object(b.jsx)(r.b,{to:e.path,children:e.name})},e.id)}))})})]})]}),Object(b.jsx)("div",{className:"header-logo-container",children:Object(b.jsx)(r.b,{to:"/",children:Object(b.jsx)("img",{src:"/images/pageLogo.png",id:"site-logo",alt:"MBlog"})})}),Object(b.jsxs)("div",{className:"right-side-container",children:[Object(b.jsxs)(r.b,{to:"/posts/create",className:"header-create",children:[Object(b.jsx)("span",{children:"Create post"}),Object(b.jsx)("i",{className:"fas fa-feather"})]}),c.logged&&Object(b.jsxs)("div",{className:"notif-btn-container",children:[Object(b.jsxs)("button",{onClick:C,className:"notif-btn",children:[Object(b.jsx)("span",{children:"10"}),Object(b.jsx)("i",{className:"far fa-bell"})]}),p&&Object(b.jsx)(h,{})]}),Object(b.jsx)("button",{onClick:g,className:"search-btn",children:Object(b.jsx)("i",{className:"fas fa-search"})}),c.logged?Object(b.jsxs)("div",{className:"user-profile",children:[Object(b.jsx)("img",{className:"user-avt",src:O(c.user.userImage),alt:"user"}),Object(b.jsx)(r.b,{to:"/me",children:"".concat(c.user.firstName," ").concat(c.user.lastName)})]}):Object(b.jsxs)("div",{className:"sign-container",children:[Object(b.jsx)(r.b,{to:"/sign-in",className:"sign-btn",children:"Sign in"}),Object(b.jsx)(r.b,{to:"/sign-up",className:"sign-btn active",children:"Sign up"})]})]})]}),Object(b.jsxs)("div",{className:"mb-header-container",children:[Object(b.jsx)("div",{onClick:I,className:y?"header-overlay active":"header-overlay"}),Object(b.jsxs)("div",{className:y?"mb-side-menu active":"mb-side-menu",children:[Object(b.jsxs)("div",{className:"mb-side-menu-header",children:[Object(b.jsx)("i",{onClick:I,className:"fas fa-times hide-side-menu-icon"}),c.logged?Object(b.jsxs)("div",{className:"user-profile",children:[Object(b.jsx)("img",{className:"user-avt",src:O(c.user.userImage),alt:"user"}),Object(b.jsx)(r.b,{to:"/me",children:"".concat(c.user.firstName," ").concat(c.user.lastName)})]}):Object(b.jsxs)("div",{className:"mb-sign-container",children:[Object(b.jsx)(r.b,{to:"/sign-up",className:"mb-sign-btn",children:"Sign up"}),Object(b.jsx)(r.b,{to:"/sign-in",className:"mb-sign-btn active",children:"Sign in"})]})]}),Object(b.jsx)("input",{placeholder:"Search...",className:"mb-search"}),Object(b.jsxs)("ul",{className:"mb-header-menu",children:[w.menu.map((function(e){return Object(b.jsx)("li",{className:e.path===t?"mb-header-menu-item active":"mb-header-menu-item",children:Object(b.jsx)(r.b,{to:e.path,children:e.name})},e.id)})),w.childMenu.map((function(e){return Object(b.jsx)("li",{className:e.path===t?"mb-header-menu-item active":"mb-header-menu-item",children:Object(b.jsx)(r.b,{to:e.path,children:e.name})},e.id)}))]})]}),Object(b.jsx)("div",{className:"mb-header-logo-container",children:Object(b.jsx)(r.b,{to:"/",children:Object(b.jsx)("img",{src:"/images/pageLogo.png",id:"site-logo",alt:"MBlog"})})}),c.logged&&Object(b.jsxs)("div",{className:"mb notif-btn-container",children:[Object(b.jsxs)("button",{onClick:C,className:"mb notif-btn",children:[Object(b.jsx)("span",{children:"10"}),Object(b.jsx)("i",{className:"far fa-bell"})]}),p&&Object(b.jsx)(h,{})]}),Object(b.jsx)("button",{onClick:I,className:"mb-menu-btn active",children:Object(b.jsx)("i",{className:"fas fa-bars"})})]})]})})})),f=function(){return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{id:"footer",children:[Object(b.jsxs)("div",{className:"footer-container",children:[Object(b.jsxs)("div",{className:"footer-data",children:[Object(b.jsx)("div",{className:"footer-logo",children:Object(b.jsx)(r.b,{to:"/",children:Object(b.jsx)("img",{src:"/images/pageLogo.png",alt:"logo"})})}),Object(b.jsx)("p",{className:"footer-desc",children:"A minimal, functional theme for running a paid-membership publication on Ghost."}),Object(b.jsxs)("div",{className:"footer-networks",children:[Object(b.jsx)(r.b,{to:"/",children:Object(b.jsx)("i",{className:"fab fa-facebook"})}),Object(b.jsx)(r.b,{to:"/",children:Object(b.jsx)("i",{className:"fab fa-youtube"})}),Object(b.jsx)(r.b,{to:"/",children:Object(b.jsx)("i",{className:"fab fa-instagram"})}),Object(b.jsx)(r.b,{to:"/",children:Object(b.jsx)("i",{className:"fab fa-twitter"})})]})]}),Object(b.jsxs)("div",{className:"footer-menu",children:[Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{className:"title",children:"About"}),Object(b.jsx)("li",{children:Object(b.jsx)(r.b,{to:"/",children:"About"})}),Object(b.jsx)("li",{children:Object(b.jsx)(r.b,{to:"/",children:"About"})}),Object(b.jsx)("li",{children:Object(b.jsx)(r.b,{to:"/",children:"About"})}),Object(b.jsx)("li",{children:Object(b.jsx)(r.b,{to:"/",children:"About"})})]}),Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{className:"title",children:"About"}),Object(b.jsx)("li",{children:Object(b.jsx)(r.b,{to:"/",children:"About"})}),Object(b.jsx)("li",{children:Object(b.jsx)(r.b,{to:"/",children:"About"})}),Object(b.jsx)("li",{children:Object(b.jsx)(r.b,{to:"/",children:"About"})}),Object(b.jsx)("li",{children:Object(b.jsx)(r.b,{to:"/",children:"About"})})]}),Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{className:"title",children:"About"}),Object(b.jsx)("li",{children:Object(b.jsx)(r.b,{to:"/",children:"About"})}),Object(b.jsx)("li",{children:Object(b.jsx)(r.b,{to:"/",children:"About"})}),Object(b.jsx)("li",{children:Object(b.jsx)(r.b,{to:"/",children:"About"})}),Object(b.jsx)("li",{children:Object(b.jsx)(r.b,{to:"/",children:"About"})})]}),Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{className:"title",children:"About"}),Object(b.jsx)("li",{children:Object(b.jsx)(r.b,{to:"/",children:"About"})}),Object(b.jsx)("li",{children:Object(b.jsx)(r.b,{to:"/",children:"About"})}),Object(b.jsx)("li",{children:Object(b.jsx)(r.b,{to:"/",children:"About"})}),Object(b.jsx)("li",{children:Object(b.jsx)(r.b,{to:"/",children:"About"})})]})]})]}),Object(b.jsx)("p",{className:"footer-copyright",children:" \xa9 2021. All Right Reserved. Published with  _mb1o4er"})]})})},x="TOGGLE_LOADING",p="GET_USERINFOR",v=function(){return{type:p}},N=function(e){return{type:x,payload:e}},S=Object(m.b)(null,{getUserInfo:v})((function(e){var t=Object(l.g)().pathname||"/";return Object(a.useEffect)((function(){e.getUserInfo()}),[]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(g,{asPath:t}),Object(b.jsx)("div",{children:e.children}),Object(b.jsx)(f,{})]})})),y=c(4),k=c(81),w=c.n(k),C=function(e){var t=e.settings||{};return Object(b.jsx)(w.a,Object(y.a)(Object(y.a)({},t),{},{children:e.children}))},I=function(e){var t=e.posts,c={centerPadding:"30px",dots:!0,infinite:!0,speed:500,slidesToShow:5,slidesToScroll:5,responsive:[{breakpoint:1199,settings:{slidesToShow:4,slidesToScroll:4,infinite:!0,dots:!0}},{breakpoint:767,settings:{slidesToShow:2,slidesToScroll:2,infinite:!0,dots:!0}},{breakpoint:575,settings:{slidesToShow:1,slidesToScroll:1,infinite:!0,dots:!0}},{breakpoint:0,settings:{slidesToShow:1,slidesToScroll:1,infinite:!0,dots:!0}}]};return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{id:"collection1",children:Object(b.jsxs)("div",{className:"collection1-container",children:[Object(b.jsx)("h1",{className:"collection1-title",children:"Typical"}),Object(b.jsx)(C,{settings:c,children:t.map((function(e,t){return Object(b.jsx)("div",{className:"item-container",children:Object(b.jsxs)("div",{className:"item-content",children:[Object(b.jsx)("div",{className:"item-thumb",children:Object(b.jsx)(r.b,{to:"/posts/".concat(e.slug),children:Object(b.jsx)("img",{src:O(e.image),alt:"img"})})}),Object(b.jsxs)("div",{className:"item-title",children:[Object(b.jsx)(r.b,{to:"/posts/".concat(e.slug),className:"item-title-title",children:e.title}),Object(b.jsx)("p",{className:"item-title-desc",children:e.description})]})]})},e._id)}))})]})})})},T=function(e){var t=e.posts;return console.log(t),Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{id:"latest",children:[Object(b.jsx)("h1",{className:"latest-title",children:"Latest Posts"}),Object(b.jsxs)("div",{className:"posts-container",children:[t&&t.length>1&&Object(b.jsxs)("div",{className:"first-container",children:[Object(b.jsx)("div",{className:"first-thumb",children:Object(b.jsx)(r.b,{to:"posts/".concat(t[0].slug),children:Object(b.jsx)("img",{src:O(t[0].image),alt:"img"})})}),Object(b.jsxs)("div",{className:"first-infor",children:[Object(b.jsx)(r.b,{to:"posts/".concat(t[0].slug),className:"first-category",children:t[0].category&&t[0].category.name.toUpperCase()||"\u0110ang c\u1eadp nh\u1eadt"}),Object(b.jsx)(r.b,{to:"/",className:"first-title",children:t[0].title}),Object(b.jsx)("p",{className:"first-desc",children:t[0].description})]})]}),Object(b.jsx)("div",{className:"next-container",children:Object(b.jsxs)("div",{className:"row",children:[t&&t.length>4&&t.map((function(e,t){if(t>2&&t<6)return Object(b.jsx)("div",{className:"col-12 col-sm-6 col-md-4 col-lg-4 col-xl-4",children:Object(b.jsxs)("div",{className:"next-content",children:[Object(b.jsx)("div",{className:"next-thumb",children:Object(b.jsx)(r.b,{to:"posts/".concat(e.slug),children:Object(b.jsx)("img",{src:O(e.image),alt:"img"})})}),Object(b.jsxs)("div",{className:"next-infor",children:[Object(b.jsx)(r.b,{to:"posts/".concat(e.slug),className:"next-title",children:e.title}),Object(b.jsx)("p",{className:"next-desc",children:e.description}),Object(b.jsx)(r.b,{to:"/",className:"next-category",children:e.category&&e.category.name.toUpperCase()||"\u0110ang c\u1eadp nh\u1eadt"})]})]})})})),t&&t.length>6&&t.map((function(e,t){if(t>4&&t<7)return Object(b.jsx)("div",{className:"col-12 col-sm-6 col-md-6 col-lg-6 col-xl-6",children:Object(b.jsxs)("div",{className:"next-content sec",children:[Object(b.jsx)("div",{className:"next-thumb",children:Object(b.jsx)(r.b,{to:"posts/".concat(e.slug),children:Object(b.jsx)("img",{src:O(e.image),alt:"img"})})}),Object(b.jsxs)("div",{className:"next-infor",children:[Object(b.jsx)(r.b,{to:"posts/".concat(e.slug),className:"next-title",children:e.title}),Object(b.jsx)("p",{className:"next-desc",children:e.description}),Object(b.jsx)(r.b,{to:"/",className:"next-category",children:e.category&&e.category.name.toUpperCase()||"\u0110ang c\u1eadp nh\u1eadt"})]})]})})}))]})})]}),Object(b.jsx)(r.b,{to:"/",className:"latest-seemore",children:"See more..."})]})})},F=function(){return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{id:"invite",children:Object(b.jsxs)("div",{className:"invite-container",children:[Object(b.jsx)("h1",{children:"Subcribe for new posts"}),Object(b.jsxs)("div",{className:"form-container",children:[Object(b.jsx)("input",{placeholder:"Your email address"}),Object(b.jsx)("button",{children:"Subcribe"})]})]})})})},_=c(144),E=_.create({baseURL:"https://manhbui-testdeploy-mblog.herokuapp.com",withCredentials:!0}),P=function(e,t,c){if(e&&t)return E({method:e,url:t,data:c||{}});console.log("error somt")},L=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),c=t[0],s=t[1];return Object(a.useEffect)((function(){console.log(1),P("GET","api/posts").then((function(e){console.log(e),e.data&&e.data.status&&s(e.data.posts)}))}),[]),Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(S,{children:[Object(b.jsx)(I,{posts:c}),Object(b.jsx)(T,{posts:c}),Object(b.jsx)(I,{posts:c}),Object(b.jsx)(F,{})]})})},R=c(8),A=function(e){var t=Object(a.useState)(null),c=Object(o.a)(t,2),s=c[0],n=c[1],i=Object(a.useState)(null),l=Object(o.a)(i,2),j=(l[0],l[1],Object(a.useState)([])),d=Object(o.a)(j,2),u=d[0],h=d[1],m=Object(a.useState)(null),O=Object(o.a)(m,2),g=O[0],f=O[1],x=Object(a.useState)(null),p=Object(o.a)(x,2),v=p[0],N=p[1],S=Object(a.useState)({all:!0,categories:!1,sort:!1}),k=Object(o.a)(S,2),w=k[0],C=k[1],I=function(t,c){var a=u.filter((function(e){return"sort"!==e.type}));C(Object(y.a)(Object(y.a)({},w),{},{sort:!0,all:!1})),h([].concat(Object(R.a)(a),[{type:"sort",value:c}])),N(t);var s={category:g,date:t};e.totalFilter(s)},T=function(){C(Object(y.a)(Object(y.a)({},w),{},{all:!0,categories:!1,sort:!1})),h([]),e.totalFilter({})};return Object(a.useEffect)((function(){P("GET","api/categories").then((function(e){e.data&&e.data.status&&n(e.data.categories)}))}),[]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{id:"filter",children:[Object(b.jsxs)("div",{className:"filter-container",children:[Object(b.jsx)("i",{className:"fas fa-filter"}),Object(b.jsxs)("ul",{className:"filter-list",children:[Object(b.jsx)("li",{className:w.all?"filter-item active":"filter-item",onClick:T,children:"All"}),Object(b.jsxs)("li",{className:w.categories?"filter-item active":"filter-item",children:["Categories",s&&s.length>0&&Object(b.jsx)("ul",{className:"filter-menu",children:s.map((function(t){return Object(b.jsx)("li",{onClick:function(){return function(t,c){var a=u.filter((function(e){return"category"!==e.type}));C(Object(y.a)(Object(y.a)({},w),{},{categories:!0,all:!1})),h([].concat(Object(R.a)(a),[{type:"category",value:c}])),f(t);var s={category:t,date:v};e.totalFilter(s)}(t._id,t.name)},children:t.name})}))})]}),Object(b.jsxs)("li",{className:w.sort?"filter-item active":"filter-item",children:["Date",Object(b.jsxs)("ul",{className:"filter-menu",children:[Object(b.jsx)("li",{onClick:function(){return I("-createDate","Latest")},children:"Latest"}),Object(b.jsx)("li",{onClick:function(){return I("createDate","Earliest")},children:"Earliest"})]})]})]})]}),u&&u.length>0&&Object(b.jsxs)("div",{className:"filter-tag-container",children:[Object(b.jsx)("span",{children:"Filter by: "}),Object(b.jsxs)("div",{className:"filter-tags",children:[u.map((function(t){return Object(b.jsxs)("div",{className:"tag",children:[Object(b.jsx)("span",{children:t.value}),Object(b.jsx)("i",{onClick:function(){return function(t){var c=u.filter((function(e){return e.type!==t}));h(c),"category"===t?C(Object(y.a)(Object(y.a)({},w),{},{categories:!1})):"sort"===t&&C(Object(y.a)(Object(y.a)({},w),{},{sort:!1}));var a={category:g,date:v};"category"===t?(a.category=null,f(null)):"sort"===t&&(a.date=null,N(null)),0===c.length&&C({categories:!1,sort:!1,all:!0}),e.totalFilter(a)}(t.type)},className:"far fa-times-circle"})]})})),Object(b.jsx)("div",{className:"tag",onClick:T,children:Object(b.jsx)("span",{style:{color:"rgb(238, 63, 63)",cursor:"pointer"},children:"Remove all filter"})})]})]})]}),Object(b.jsxs)("div",{className:"opt",children:[Object(b.jsxs)("div",{className:"all-post",children:[e.length>0&&Object(b.jsx)("span",{children:"".concat(e.length,"/").concat(e.total)}),Object(b.jsx)("span",{className:"line"})]}),Object(b.jsxs)("div",{className:"create-post",children:[Object(b.jsx)(r.b,{to:"/posts/create",className:"create-new",children:"Create a new post?"}),Object(b.jsx)("i",{className:"fas fa-pen-alt"})]})]})]})},D=c(24),B=c(34),G=c.n(B),M={toggleLoading:N},U=Object(m.b)((function(e){return{web:e.web}}),M)((function(e){var t=Object(l.f)(),c=e.web,s=e.posts,n=Object(a.useState)(null),i=Object(o.a)(n,2),j=i[0],d=i[1],u=Object(a.useState)(!1),h=Object(o.a)(u,2),m=h[0],g=h[1],f=Object(a.useState)([]),x=Object(o.a)(f,2),p=x[0],v=x[1],N=Object(a.useState)(!1),S=Object(o.a)(N,2),k=S[0],w=S[1],C=Object(a.useState)({}),I=Object(o.a)(C,2),T=I[0],F=I[1],_=Object(a.useRef)(null),E=function(e){g(!0),P("GET","api/posts/comment/".concat(e,"?page=",1)).then((function(e){e.data&&e.data.status?e.data.comments&&e.data.comments.length>0&&v(e.data.comments):v([])})).catch((function(e){return console.log(e)})).then((function(){g(!1)}))};return Object(b.jsxs)("div",{className:"postList",children:[Object(b.jsx)("div",{style:{display:k?"block":"none"},className:"delete-confirm",children:Object(b.jsxs)("div",{className:"confirm-container",children:[Object(b.jsx)("p",{children:"Do you want to delete this post?"}),Object(b.jsxs)("div",{className:"btns",children:[Object(b.jsx)("button",{onClick:function(){return t=T._id,c=T.author._id,void P("POST","api/posts/delete/".concat(t),{postId:t,authorId:c}).then((function(c){c.data&&c.data.status&&(w(!1),e.removeEl(t))})).catch((function(e){console.log(e),alert("Error!")}));var t,c},className:"delete",children:"Delete"}),Object(b.jsx)("button",{onClick:function(){return w(!k)},children:"Cancel"})]})]})}),Object(b.jsx)("div",{className:"postList-container",children:s&&s.length>0&&s.map((function(a,n){var i;return Object(b.jsxs)("div",{className:"postList-list",children:[Object(b.jsxs)("div",{className:"mb-user-info",children:[Object(b.jsx)(r.b,{to:"/posts/".concat(a.slug),children:a.author&&a.author.firstName}),Object(b.jsxs)("span",{children:[" - ",G()(a.createDate).format("DD/MM/YYYY")]})]}),Object(b.jsxs)("div",{className:"postList-list-container",children:[Object(b.jsxs)("div",{className:"info-container",children:[Object(b.jsxs)("div",{className:"user-container",children:[Object(b.jsx)(r.b,{to:"/posts/".concat(a.slug),children:Object(b.jsx)("img",{src:O(a.image)})}),Object(b.jsx)(r.b,{to:"/posts/".concat(a.slug),className:"username",children:a.author&&a.author.firstName})]}),Object(b.jsx)("div",{className:"create-time",children:Object(b.jsx)("span",{children:G()(a.createDate).format("DD/MM/YYYY")})})]}),Object(b.jsxs)("div",{className:"content-container",children:[e.author&&Object(b.jsxs)("div",{className:"author-role",children:[Object(b.jsx)(r.b,{to:"/posts/update/".concat(a._id),style:{color:"rgb(84, 84, 216)"},children:"Edit"}),Object(b.jsx)("button",{onClick:function(){return e=a,w(!k),void F(e);var e},className:"delete",children:Object(b.jsx)("i",{className:"far fa-trash-alt"})})]})||null,Object(b.jsx)(r.b,{to:"/posts/".concat(a.slug),className:"post-title",children:a.title}),Object(b.jsx)("p",{className:"category",children:(null===(i=a.category)||void 0===i?void 0:i.name)||"null"}),Object(b.jsx)("p",{className:"content",children:a.description}),Object(b.jsx)(r.b,{to:"/posts/".concat(a.slug),className:"read-more",children:"Read more..."}),!e.search&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"tools",children:[Object(b.jsx)("button",{onClick:function(){return e.likeHandle(a,n)},className:"like",children:a.liked&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("i",{className:"fas fa-heart"}),Object(b.jsx)("span",{children:"You ".concat(a.like&&a.like.length>1?"and ".concat(a.like.length-1," others"):"")})]})||Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("i",{className:"far fa-heart"}),Object(b.jsx)("span",{children:"".concat(a.like&&0===a.like.length?"Like this post":"".concat(a.like.length," people"))})]})}),Object(b.jsxs)("button",{className:j===n?"comment active":"comment",onClick:function(){return function(e,t){e===j?d(null):(E(t),d(e))}(n,a._id)},children:[Object(b.jsx)("i",{className:"far fa-comments"}),Object(b.jsx)("span",{children:a.comment&&a.comment.length||0})]}),Object(b.jsx)("button",{className:"share",children:Object(b.jsx)("i",{className:"fas fa-share"})}),Object(b.jsx)("button",{className:"add",children:Object(b.jsx)("i",{className:"far fa-plus-square"})})]}),j===n&&Object(b.jsxs)("div",{className:"comments active",children:[Object(b.jsx)("div",{className:"comment-list",children:p&&p.length>0&&Object(b.jsxs)("ul",{children:[p.map((function(e){return Object(b.jsxs)("li",{className:"comment-item",children:[Object(b.jsxs)("div",{className:"comment-author",children:[Object(b.jsx)(r.b,{to:"/",children:Object(b.jsx)("img",{src:O(e.user.image)})}),Object(b.jsx)(r.b,{to:"/",children:"".concat(e.user.firstName," ").concat(e.user.lastName)})]}),Object(b.jsx)("div",{className:"comment-content",children:Object(b.jsx)("p",{children:e.content})})]},e.id)})),m&&Object(b.jsx)("li",{className:"postList-comment-loading",children:Object(b.jsx)("img",{src:"/images/cmtloading.gif"})})]})||Object(b.jsx)("p",{className:"comemnt-list comment-alert",children:"There are not any comment. write your mind?"})}),Object(b.jsxs)("div",{className:"user-comment",children:[Object(b.jsx)("img",{src:O(c.user.userImage)}),Object(b.jsxs)("div",{className:"comment-input-container",children:[Object(b.jsx)(D.a,{id:a._id,ref:_,placeholder:"write a comment...",className:"comment-input"},a._id),Object(b.jsx)("button",{onClick:function(){return function(a,n){var i=a._id;g(!0);var r={postId:i,content:_.current.value};P("POST","/api/posts/comment/".concat(i),r).then((function(i){if(i.data&&i.data.status){var l=Object(R.a)(a.comment);l.push({content:r.content});var o=[].concat(Object(R.a)(s.slice(0,n)),[Object(y.a)(Object(y.a)({},a),{},{comment:l})],Object(R.a)(s.slice(n+1)));e.setPosts(o),_.current.value="";var j=p;j.length>3&&(j=Object(R.a)(p.slice(1))),console.log(j),v([].concat(Object(R.a)(j),[Object(y.a)({user:{_id:c.user.userId,firstName:c.user.firstName,lastName:c.user.lastName,image:c.user.userImage}},r)]))}else"khong the lay token"===i.data.message&&t.replace({pathname:"/sign-in"})})).catch((function(e){return console.log(e)})).then((function(){g(!1)}))}(a,n)},children:Object(b.jsx)("i",{className:"far fa-paper-plane"})})]})]})]})]})]})]}),Object(b.jsx)("hr",{className:"boundary"})]},a._id)}))||Object(b.jsx)("p",{children:"Kh\xf4ng c\xf3 b\xe0i vi\xeat n\xe0o."})})]})})),Y=function(e){var t=e.page,c=e.totalPage,a=Array.from(new Array(c));return Object(b.jsx)("div",{id:"pagination",children:Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{onClick:function(){return e.changePage(t-1)},hidden:1===t,children:Object(b.jsx)("i",{className:"fas fa-chevron-left"})}),a.map((function(c,a){return Object(b.jsx)("li",{onClick:function(){return e.changePage(a+1)},style:{borderColor:a+1!==t?"rgb(189, 112, 50)":"transparent"},children:a+1},a)})),Object(b.jsx)("li",{onClick:function(){return e.changePage(t+1)},hidden:t===c,children:Object(b.jsx)("i",{className:"fas fa-chevron-right"})})]})})},q={toggleLoading:N},V=Object(m.b)((function(e){return{web:e.web}}),q)((function(e){var t=e.web,c=Object(a.useState)([]),s=Object(o.a)(c,2),n=s[0],i=s[1],r=Object(a.useState)(0),l=Object(o.a)(r,2),j=l[0],d=l[1],u=Object(a.useState)(1),h=Object(o.a)(u,2),m=h[0],O=h[1],g=Object(a.useState)(0),f=Object(o.a)(g,2),x=f[0],p=f[1],v=Object(a.useState)(null),N=Object(o.a)(v,2),k=N[0],w=N[1],C=Object(a.useState)(null),I=Object(o.a)(C,2),T=I[0],F=I[1];return Object(a.useEffect)((function(){e.toggleLoading(),P("GET","/api/posts?page=".concat(1)).then((function(e){if(200===e.status&&e.data&&e.data.posts&&e.data.posts.length>0){var c=e.data.posts.map((function(e){var c=!1;return e.like.filter((function(e){return e._id===t.user.userId})).length>0&&(c=!0),Object(y.a)(Object(y.a)({},e),{},{liked:c})}));i(c),O(e.data.page),p(e.data.totalPage),d(e.data.totalPost)}})).catch((function(e){return console.log(e)})).then((function(){e.toggleLoading()}))}),[]),Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(S,{children:[Object(b.jsx)(A,{totalFilter:function(c){console.log(c);var a=c.category,s=c.date;w(a),F(s);var n="/api/posts?";a&&(n+="category=".concat(a,"&")),s&&(n+="sortDate=".concat(s,"&")),e.toggleLoading(),P("GET","".concat(n,"page=",1)).then((function(e){if(200===e.status)if(e.data&&e.data.posts&&e.data.posts.length>0){var c=e.data.posts.map((function(e){var c=!1;return e.like.filter((function(e){return e._id===t.user.userId})).length>0&&(c=!0),Object(y.a)(Object(y.a)({},e),{},{liked:c})}));i(c),O(e.data.page),p(e.data.totalPage),d(e.data.totalPost)}else i([]),d(0)})).catch((function(e){return console.log(e)})).then((function(){e.toggleLoading()}))},length:n.length,total:j}),Object(b.jsx)(U,{setPosts:i,likeHandle:function(e,c){var a,s=e.like,r=e._id,l=t.user.userId;if(s.filter((function(e){return e._id===l})).length>0){console.log("unlike"),P("POST","api/posts/unlike/".concat(r));var o=s.filter((function(e){return e._id!==l}));a=[].concat(Object(R.a)(n.slice(0,c)),[Object(y.a)(Object(y.a)({},e),{},{liked:!1,like:o})],Object(R.a)(n.slice(c+1)))}else console.log("like"),function(e){P("POST","api/posts/like/".concat(e))}(r),s.push({_id:l}),a=[].concat(Object(R.a)(n.slice(0,c)),[Object(y.a)(Object(y.a)({},e),{},{liked:!0,like:s})],Object(R.a)(n.slice(c+1)));i(a)},posts:n}),n&&n.length>0&&Object(b.jsx)(Y,{changePage:function(c){var a=T,s="/api/posts?";k&&(s+="category=".concat(k,"&")),a&&(s+="sortDate=".concat(a,"&")),e.toggleLoading(),P("GET","".concat(s,"page=").concat(c)).then((function(e){if(200===e.status)if(e.data&&e.data.posts&&e.data.posts.length>0){var c=e.data.posts.map((function(e){var c=!1;return e.like.filter((function(e){return e._id===t.user.userId})).length>0&&(c=!0),Object(y.a)(Object(y.a)({},e),{},{liked:c})}));i(c),O(e.data.page),p(e.data.totalPage),d(e.data.totalPost)}else i([]),d(0)})).catch((function(e){return console.log(e)})).then((function(){e.toggleLoading()}))},page:m,totalPage:x})]})})})),J={toggleLoading:N},z=Object(m.b)((function(e){return{web:e.web}}),J)((function(e){var t=e.web,c=localStorage.getItem("userId"),s="/api/posts?";c&&(s+="checkAuthor=".concat(c,"&"));var n=Object(a.useState)([]),i=Object(o.a)(n,2),r=i[0],l=i[1],j=Object(a.useState)(!1),d=Object(o.a)(j,2),u=d[0],h=d[1],m=Object(a.useState)(0),O=Object(o.a)(m,2),g=(O[0],O[1]),f=Object(a.useState)(1),x=Object(o.a)(f,2),p=x[0],v=x[1],N=Object(a.useState)(0),k=Object(o.a)(N,2),w=k[0],C=k[1];Object(a.useEffect)((function(){e.toggleLoading(),P("GET",s).then((function(e){if(200===e.status)if(e.data&&e.data.posts&&e.data.posts.length>0){var c=e.data.posts.map((function(e){var c=!1;return e.like.filter((function(e){return e._id===t.user.userId})).length>0&&(c=!0),Object(y.a)(Object(y.a)({},e),{},{liked:c})}));l(c),h(e.data.isAuthor)}else l(0)})).catch((function(e){return console.log(e)})).then((function(){e.toggleLoading()}))}),[]);return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(S,{children:[Object(b.jsx)(U,{setPosts:l,author:u,removeEl:function(e){var t=r.filter((function(t){return t._id!==e}));l(t)},likeHandle:function(e,c){var a,s=e.like,n=e._id,i=t.user.userId;if(s.filter((function(e){return e._id===i})).length>0){console.log("unlike"),P("POST","api/posts/unlike/".concat(n));var o=s.filter((function(e){return e._id!==i}));a=[].concat(Object(R.a)(r.slice(0,c)),[Object(y.a)(Object(y.a)({},e),{},{liked:!1,like:o})],Object(R.a)(r.slice(c+1)))}else console.log("like"),function(e){P("POST","api/posts/like/".concat(e))}(n),s.push({_id:i}),a=[].concat(Object(R.a)(r.slice(0,c)),[Object(y.a)(Object(y.a)({},e),{},{liked:!0,like:s})],Object(R.a)(r.slice(c+1)));l(a)},posts:r}),r&&r.length>0&&Object(b.jsx)(Y,{changePage:function(c){e.toggleLoading(),P("GET","".concat("/api/posts?","page=").concat(c)).then((function(e){if(200===e.status)if(e.data&&e.data.posts&&e.data.posts.length>0){var c=e.data.posts.map((function(e){var c=!1;return e.like.filter((function(e){return e._id===t.user.userId})).length>0&&(c=!0),Object(y.a)(Object(y.a)({},e),{},{liked:c})}));l(c),v(e.data.page),C(e.data.totalPage),g(e.data.totalPost)}else l([]),g(0)})).catch((function(e){return console.log(e)})).then((function(){e.toggleLoading()}))},page:p,totalPage:w})]})})})),H=c(21),K=c.n(H),$={getUserInfo:v},Z=Object(m.b)((function(e){return{web:e.web}}),$)((function(e){var t=Object(a.useState)(!1),c=Object(o.a)(t,2),s=c[0],n=c[1],i=Object(a.useState)({}),j=Object(o.a)(i,2),u=j[0],h=j[1],m=Object(a.useState)(!1),O=Object(o.a)(m,2),g=O[0],f=O[1],x=Object(a.useState)(!1),p=Object(o.a)(x,2),v=p[0],N=p[1],S=Object(l.f)();Object(a.useEffect)((function(){localStorage.clear(),K.a.remove("userToken")}),[]);var k=function(e,t){return!e&&!t};return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"sign-in-container",children:[Object(b.jsxs)("div",{className:"sign-in-header",children:[Object(b.jsx)("div",{className:"sign-in-logo-wrapper",children:Object(b.jsx)(r.b,{to:"/",children:Object(b.jsx)("img",{src:"/images/pageLogo.png"})})}),Object(b.jsxs)("h1",{className:"sign-in-title",children:["Sign in to MB",Object(b.jsx)("span",{style:{color:"#5073FF"},children:"log"})]})]}),Object(b.jsxs)("form",{onSubmit:function(t){return function(t){k(s,g)?P("POST","/api/sign-in",u).then((function(t){console.log("response: ",t);var c=t.data,a=c.userToken;if(c.logged){var s=c.userData;a&&K.a.set("userToken",a,{expires:7}),localStorage.setItem("logged",!0),localStorage.setItem("firstName",s.firstName),localStorage.setItem("lastName",s.lastName),localStorage.setItem("userId",s.id),localStorage.setItem("userImage",s.image),localStorage.setItem("userBio",s.bio),e.getUserInfo(),S.replace({pathname:"/"})}else alert("Th\xf4ng tin t\xe0i kho\u1ea3n kh\xf4ng \u0111\xfang, vui l\xf2ng \u0111\u0103ng nh\u1eadp l\u1ea1i.")})).catch((function(e){console.log("err",e)})):alert("Th\xf4ng tin kh\xf4ng h\u1ee3p l\u1ec7!"),t.preventDefault()}(t)},id:"sign-up-form",children:[Object(b.jsx)("label",{htmlFor:"username",children:"Username: "}),Object(b.jsx)("input",{onChange:function(e){return function(e){var t,c,a=e.target.value;a=a.trim(),h(Object(y.a)(Object(y.a)({},u),{},{username:a})),""!==a?(n(!d(a)),k(!d(a),g)&&(null===(t=a)||void 0===t?void 0:t.length)>0&&(null===(c=u.password)||void 0===c?void 0:c.length)>=6?N(!0):N(!1)):n(!1)}(e)},className:s?"validate-error":"",required:!0,id:"username",placeholder:"Enter your Username",name:"username"}),Object(b.jsx)("label",{htmlFor:"password",children:"Password: "}),Object(b.jsx)("input",{onChange:function(e){return function(e){var t,c,a=e.target.value;a=a.trim(),h(Object(y.a)(Object(y.a)({},u),{},{password:a})),a.length<5?f(!0):f(!1),k(s,g)&&(null===(t=u.username)||void 0===t?void 0:t.length)>0&&(null===(c=a)||void 0===c?void 0:c.length)>=6?N(!0):N(!1)}(e)},required:!0,type:"password",placeholder:"******",id:"password",name:"password"}),Object(b.jsx)(r.b,{className:"link-to-sign-in",to:"/forget",children:"Forgot password?"}),Object(b.jsx)("div",{className:"form-btn",children:Object(b.jsx)("button",{disabled:!v,type:"submit",className:v?"sign-btn active":"sign-btn",children:"Sign in"})}),Object(b.jsxs)("div",{className:"form-auths",children:[Object(b.jsxs)(r.b,{to:"/",className:"fb",children:[Object(b.jsx)("span",{children:"Facebook"}),Object(b.jsx)("i",{className:"fab fa-facebook"})]}),Object(b.jsxs)(r.b,{to:"/",className:"gg",children:[Object(b.jsx)("span",{children:"Google"}),Object(b.jsx)("i",{className:"fab fa-google"})]})]})]}),Object(b.jsx)(r.b,{to:"/sign-up",className:"link-to-sign-in",children:"You don't have an account? Sign-up here!"})]})})})),W={getUserInfo:v},Q=Object(m.b)((function(e){return{web:e.web}}),W)((function(e){var t=Object(a.useState)(!1),c=Object(o.a)(t,2),s=c[0],n=c[1],i=Object(a.useState)(!1),u=Object(o.a)(i,2),h=u[0],m=u[1],O=Object(a.useState)(!1),g=Object(o.a)(O,2),f=g[0],x=g[1],p=Object(a.useState)(!1),v=Object(o.a)(p,2),N=v[0],S=v[1],k=Object(a.useState)(""),w=Object(o.a)(k,2),C=w[0],I=w[1],T=Object(a.useState)(!1),F=Object(o.a)(T,2),_=F[0],E=F[1],L=Object(a.useState)({}),R=Object(o.a)(L,2),A=R[0],D=R[1],B=Object(l.f)();Object(a.useEffect)((function(){localStorage.clear(),K.a.remove("userToken")}),[]);var G=function(t){if(s||h||f||N||_)alert("Th\xf4ng tin kh\xf4ng h\u1ee3p l\u1ec7!");else{var c=Object(y.a)({},A);P("POST","/api/sign-up",c).then((function(t){var c=t.data,a=c.token;if(c.logged){var s=c.userData;a&&K.a.set("userToken",a,{expires:7}),localStorage.setItem("logged",!0),localStorage.setItem("firstName",s.firstName),localStorage.setItem("lastName",s.lastName),localStorage.setItem("userId",s.id),localStorage.setItem("userImage",s.image),localStorage.setItem("userBio",s.bio),e.getUserInfo(),B.replace({pathname:"/"})}else alert("T\xean t\xe0i kho\u1ea3n \u0111\xe3 t\u1ed3n t\u1ea1i, vui l\xf2ng ch\u1ecdn t\xean kh\xe1c!.")})).catch((function(e){console.log(e)})).then((function(){console.log("done")}))}t.preventDefault()};return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"sign-in-container",children:[Object(b.jsxs)("div",{className:"sign-in-header",children:[Object(b.jsx)("div",{className:"sign-in-logo-wrapper",children:Object(b.jsx)(r.b,{to:"/",children:Object(b.jsx)("img",{src:"/images/pageLogo.png",alt:"logo"})})}),Object(b.jsxs)("h1",{className:"sign-in-title",children:["Sign up to MB",Object(b.jsx)("span",{style:{color:"#5073FF"},children:"log"})]})]}),Object(b.jsxs)("form",{onSubmit:function(e){return G(e)},id:"sign-in-form",children:[Object(b.jsx)("span",{style:{fontFamily:"myFirstFontLight"},children:"Full name:"}),Object(b.jsxs)("div",{className:"form-name",children:[Object(b.jsx)("input",{onChange:function(e){return function(e){var t=e.target.value||"";t=t.trim(),D(Object(y.a)(Object(y.a)({},A),{},{firstName:t})),x(""!==t&&!j(t))}(e)},className:f?"validate-error":"",required:!0,name:"firstName",placeholder:"First name"}),Object(b.jsx)("input",{onChange:function(e){return function(e){var t=e.target.value||"";D(Object(y.a)(Object(y.a)({},A),{},{lastName:t})),S(""!==t&&!j(t))}(e)},className:N?"validate-error":"",required:!0,name:"lastName",placeholder:"Last name"})]}),Object(b.jsx)("label",{htmlFor:"email",children:"Email: "}),Object(b.jsx)("input",{onChange:function(e){return function(e){var t=e.target.value||"";t=t.trim(),D(Object(y.a)(Object(y.a)({},A),{},{email:t})),n(""!==t&&!function(e){return!!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e)}(t))}(e)},className:s?"validate-error":"",required:!0,id:"email",placeholder:"example@email.com",name:"email"}),Object(b.jsx)("label",{htmlFor:"username",children:"Username: "}),Object(b.jsx)("input",{onChange:function(e){return function(e){var t=e.target.value||"";t=t.trim(),D(Object(y.a)(Object(y.a)({},A),{},{username:t})),m(""!==t&&!d(t))}(e)},className:h?"validate-error":"",required:!0,id:"username",placeholder:"username123",name:"username"}),Object(b.jsx)("label",{htmlFor:"password",children:"Password: "}),Object(b.jsx)("input",{onChange:function(e){return function(e){var t=e.target.value||"";t=t.trim(),I(t)}(e)},required:!0,type:"password",placeholder:"a-z, 0-9, at least 6 characters",id:"password",name:"password"}),Object(b.jsx)("label",{htmlFor:"re-password",children:"Confirm Password: "}),Object(b.jsx)("input",{onChange:function(e){return function(e){var t=e.target.value||"";t=t.trim(),D(Object(y.a)(Object(y.a)({},A),{},{password:t})),""===t||t===C&&t.length>=6?E(!1):E(!0)}(e)},required:!0,className:_?"validate-error":"",type:"password",id:"re-password",placeholder:"******",name:"rePassword"}),Object(b.jsxs)("div",{className:"form-btn",children:[Object(b.jsx)(r.b,{to:"/sign-in",className:"sign-btn",children:"Sign in"}),Object(b.jsx)("button",{className:"sign-btn active",children:"Sign up"})]})]})]})})})),X=Object(m.b)((function(e){return{web:e.web}}))((function(e){var t=Object(l.f)(),c=e.web,s=Object(a.useRef)(null),n=Object(a.useRef)(null),i=Object(a.useRef)(null),j=Object(a.useRef)(null),d=Object(a.useRef)(null),u=Object(a.useRef)(null),h=Object(a.useState)("Create your bio"),m=Object(o.a)(h,2),g=(m[0],m[1],Object(a.useState)(!1)),f=Object(o.a)(g,2),x=f[0],p=f[1],v=Object(a.useState)({name:"",path:""}),N=Object(o.a)(v,2),S=N[0],y=N[1],k=Object(a.useState)(null),w=Object(o.a)(k,2),C=w[0],I=w[1],T=Object(a.useState)(!1),F=Object(o.a)(T,2),_=F[0],E=F[1],L=Object(a.useState)(!1),R=Object(o.a)(L,2),A=R[0],D=R[1],B=Object(a.useState)(!1),G=Object(o.a)(B,2),M=G[0],U=G[1],Y=Object(a.useState)(!1),q=Object(o.a)(Y,2),V=q[0],J=q[1],z=Object(a.useState)(0),H=Object(o.a)(z,2),$=H[0],Z=H[1];return Object(a.useEffect)((function(){e.dispatch({type:"GET_USERINFOR"}),P("GET","/api/me").then((function(e){console.log(e.data),e.data&&e.data.status?Z(e.data.posts):(console.log(e.data),t.replace({pathname:"/sign-in"}))})).catch((function(e){console.log("loi"),console.log(e)}))}),[]),Object(b.jsxs)("div",{className:"profile",children:[Object(b.jsxs)("div",{className:"edit-form",hidden:!x,children:[Object(b.jsx)("button",{onClick:function(){return p(!1)},className:"back-btn",children:Object(b.jsx)("i",{className:"fas fa-times"})}),Object(b.jsxs)("div",{className:"edit-form-container",children:[Object(b.jsx)("h3",{children:"Edit your profile"}),Object(b.jsxs)("div",{className:"edit-form-input",children:[Object(b.jsx)("input",{ref:s,placeholder:c.user.firstName}),Object(b.jsx)("input",{ref:n,placeholder:c.user.lastName}),Object(b.jsx)("input",{ref:i,placeholder:c.user.userBio})]}),Object(b.jsxs)("div",{className:"password-form",children:[Object(b.jsx)("p",{onClick:function(){return J(!0)},children:"Change Password"}),Object(b.jsxs)("div",{className:"change-pass-container",hidden:!V,children:[Object(b.jsx)("i",{onClick:function(){j.current.value=null,d.current.value=null,J(!1)},className:"fas fa-times-circle"}),Object(b.jsx)("input",{onChange:function(e){var t=e.target.value;(t=t.trim()).length<6?E(!0):E(!1),""===t&&E(!1)},ref:j,type:"password",style:{borderColor:_&&"rgb(231, 100, 100)"},placeholder:"current password"}),Object(b.jsx)("input",{onChange:function(e){var t=e.target.value;(t=t.trim()).length<6?D(!0):D(!1),""===t&&D(!1)},ref:d,type:"password",style:{borderColor:A&&"rgb(231, 100, 100)"},placeholder:"new password"}),Object(b.jsx)("input",{onChange:function(e){var t=e.target.value;(t=t.trim())!==d.current.value?U(!0):U(!1),""===t&&U(!1)},ref:u,type:"password",style:{borderColor:M&&"rgb(231, 100, 100)"},placeholder:"confirm password"})]})]}),Object(b.jsx)("button",{disabled:!(!_&&!A&&!M),style:{cursor:!_&&!A&&!M?"pointer":"no-drop"},onClick:function(){var e=s.current.value&&s.current.value.length>0&&s.current.value||c.user.firstName,t=n.current.value&&n.current.value.length>0&&n.current.value||c.user.lastName,a=i.current.value&&i.current.value.length>0&&i.current.value||c.user.userBio,r=j.current.value&&j.current.value.length>5&&j.current.value||null,l=d.current.value&&d.current.value.length>5&&d.current.value||null;_||A||M||P("POST","api/me",{file:C,firstName:e,lastName:t,bio:a,newPass:l,oldPass:r}).then((function(e){if(e.data&&e.data.status){var t=e.data.newInfo;localStorage.setItem("firstName",t.firstName),localStorage.setItem("lastName",t.lastName),localStorage.setItem("userBio",t.bio);var c=e.data.newToken;c&&c.length>0&&K.a.set("userToken",c),p(!1),window.location.reload()}else console.log(e.data)}))},children:"Submit"})]})]}),Object(b.jsxs)("div",{className:"profile-container",children:[Object(b.jsx)("div",{className:"profile-header-container",children:Object(b.jsxs)("div",{className:"profile-header",children:[Object(b.jsx)(r.b,{to:"/",children:Object(b.jsx)("i",{className:"fas fa-arrow-left"})}),Object(b.jsx)("h1",{children:"Profile"})]})}),Object(b.jsx)("div",{className:"profile-body",children:Object(b.jsxs)("div",{className:"body-user-info",children:[Object(b.jsxs)("div",{className:"avt-wrapper",children:[Object(b.jsx)("img",{src:C?S.path:O(c.user.userImage)}),Object(b.jsxs)("label",{htmlFor:"change-avt",className:"change-avt",children:[Object(b.jsx)("i",{className:"fas fa-camera"}),Object(b.jsx)("input",{id:"change-avt",onChange:function(e){var t=e.target.files[0];I(t);var c=new FileReader;c.onloadend=function(e){var t=c.result;y({name:"manh",path:t})},t&&t.type.match("image.*")&&c.readAsDataURL(t)},type:"file",placeholder:"avatar"})]})]}),Object(b.jsxs)("div",{className:"user-bio",children:[C&&Object(b.jsx)("button",{onClick:function(){var e=new FormData;e.append("file",C),e.append("oldFile",c.user.userImage),P("POST","api/me/avt",e).then((function(e){e.data&&e.data.status&&(localStorage.setItem("userImage",e.data.newImage),window.location.reload())}))},className:"change-avt-btn",children:"Save"}),Object(b.jsx)("p",{children:"".concat(c.user&&c.user.firstName," ").concat(c.user&&c.user.lastName)}),Object(b.jsx)("span",{children:c.user.userBio})]}),Object(b.jsxs)("div",{className:"user-data",children:[Object(b.jsxs)("div",{className:"follow-data",children:[Object(b.jsx)("span",{children:"123"}),Object(b.jsx)(r.b,{to:"/",children:"Follow"})]}),Object(b.jsxs)("div",{className:"following-data",children:[Object(b.jsx)("span",{children:"123"}),Object(b.jsx)(r.b,{to:"/",children:"Following"})]}),Object(b.jsxs)("div",{className:"post-data",children:[Object(b.jsx)("span",{children:$||0}),Object(b.jsx)("a",{href:"/posts/me",children:"posts"})]})]}),Object(b.jsxs)("div",{className:"option",children:[Object(b.jsx)("button",{className:"setting",onClick:function(){return p(!0)},children:Object(b.jsx)("i",{className:"fas fa-user-edit"})}),Object(b.jsx)(r.b,{to:"/sign-in",className:"close-btn",children:Object(b.jsx)("i",{className:"fas fa-power-off"})})]})]})})]})]})})),ee=function(e){var t=e.category,c=e.detail;return Object(b.jsx)("div",{id:"main_bread-crumb",children:Object(b.jsx)("div",{className:"bc-container",children:Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{className:"bc-home",children:Object(b.jsx)(r.b,{to:"/",children:Object(b.jsx)("i",{className:"fas fa-home"})})}),Object(b.jsx)("li",{className:"bc-category",children:Object(b.jsx)(r.b,{to:"/",children:Object(b.jsx)("span",{children:t||""})})}),Object(b.jsx)("li",{className:"bc-detail",children:Object(b.jsx)("span",{children:c||""})})]})})})},te=Object(m.b)((function(e){return{web:e.web}}))((function(e){var t=e.web,c=Object(l.f)(),s=Object(a.useState)({}),n=Object(o.a)(s,2),i=n[0],j=n[1],d=Object(a.useState)(!1),u=Object(o.a)(d,2),h=u[0],m=u[1],g=Object(a.useState)([]),f=Object(o.a)(g,2),x=f[0],p=f[1],v=Object(a.useState)([]),N=Object(o.a)(v,2),k=N[0],w=N[1],C=Object(l.h)().title,I=Object(a.useRef)(null);Object(a.useEffect)((function(){P("GET","api/posts/".concat(C)).then((function(e){if(e.data&&e.data.status){var c=e.data.post;return c.like.filter((function(e){return e._id===t.user.userId})).length>0&&(c.liked=!0),j(c),e.data.post}console.log("err")})).catch((function(e){return console.log(e)})).then((function(e){return P("GET","api/posts/comment/".concat(e._id,"?page=",1)).then((function(e){e.data&&e.data.status&&p(e.data.comments)})),e})).then((function(e){var t=e.category&&e.category._id||null;P("GET","api/posts/v1/filter?category=".concat(t)).then((function(e){e.data&&e.data.status&&w(e.data.relatedPost)})).catch((function(e){return console.log(e)}))}))}),[]);var T,F=function(e){var c=t.user.userId;if(e.filter((function(e){return e._id===c})).length>0){P("POST","api/posts/unlike/".concat(i._id)).then((function(e){return console.log(e)}));var a=e.filter((function(e){return e._id!==c}));j(Object(y.a)(Object(y.a)({},i),{},{liked:!1,like:a}))}else P("POST","api/posts/like/".concat(i._id)).then((function(e){return console.log(e)})),e.push({postId:i._id,_id:c}),j(Object(y.a)(Object(y.a)({},i),{},{liked:!0,like:e}))};return Object(b.jsx)(S,{children:Object(b.jsxs)("div",{id:"post-detail",children:[Object(b.jsx)(ee,{category:i.category&&i.category.name||"\u0110ang c\u1eadp nh\u1eadt",detail:i.title}),Object(b.jsx)("div",{className:"detail-container",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsxs)("div",{className:"col-12 col-sm-12 col-md-12 col-lg-9 col-xl-9",children:[Object(b.jsxs)("div",{className:"detail-create-date",children:[Object(b.jsx)("i",{className:"far fa-clock"}),Object(b.jsx)("span",{children:(T=i.createDate,G()(T).format("DD/MM/YYYY"))})]}),Object(b.jsxs)("div",{className:"detail-create-date",children:[Object(b.jsx)("i",{className:"fas fa-hashtag"}),Object(b.jsx)("span",{children:i.category&&i.category.name||"\u0110ang c\u1eadp nh\u1eadt..."})]}),Object(b.jsxs)("div",{className:"detail-author",children:[Object(b.jsx)("i",{className:"far fa-user"}),Object(b.jsx)(r.b,{to:"/",children:i.author&&"".concat(i.author&&i.author.firstName," ").concat(i.author&&i.author.lastName)||"\u0110ang c\u1eadp nh\u1eadt..."})]}),Object(b.jsx)("div",{className:"detail-title",children:Object(b.jsx)("h1",{className:"title",children:i.title})}),Object(b.jsx)("div",{className:"detail-img-wrapper",children:Object(b.jsx)("img",{width:"100%",src:O(i.image)})}),Object(b.jsx)("div",{className:"detail-content",children:Object(b.jsx)("div",{className:"content-html",dangerouslySetInnerHTML:{__html:i.content}})}),"null"!==i.source&&Object(b.jsxs)("p",{style:{opacity:.7,fontSize:"0.9rem",fontStyle:"italic",marginTop:20,display:"block",textAlign:"right"},children:["Ngu\u1ed3n: ",i.source||null]})]}),Object(b.jsxs)("div",{className:"col-12 col-sm-12 col-md-12 col-lg-3 col-xl-3",children:[Object(b.jsxs)("div",{className:"detail-tools-container",children:[Object(b.jsx)("button",{className:"like",onClick:function(){return F(i.like)},children:i.liked&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("i",{className:"fas fa-heart"}),Object(b.jsx)("span",{children:"You ".concat(i.like&&i.like.length>1?"and ".concat(i.like&&i.like.length-1," others"):"")})]})||Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("i",{className:"far fa-heart"}),Object(b.jsx)("span",{children:"".concat(i.like&&0===i.like.length?"Like this post":"".concat(i.like&&i.like.length," people"))})]})}),Object(b.jsx)("button",{className:"share",children:Object(b.jsx)("i",{className:"fas fa-share"})}),Object(b.jsx)("button",{className:"add",children:Object(b.jsx)("i",{className:"far fa-plus-square"})})]}),Object(b.jsxs)("div",{className:"comments",children:[Object(b.jsx)("div",{className:"comment-list",children:x&&x.length>0&&Object(b.jsxs)("ul",{children:[x.map((function(e){return Object(b.jsxs)("li",{className:"comment-item",children:[Object(b.jsxs)("div",{className:"comment-author",children:[Object(b.jsx)(r.b,{to:"/",children:Object(b.jsx)("img",{src:O(e.user.image)})}),Object(b.jsx)(r.b,{to:"/",children:"".concat(e.user.firstName," ").concat(e.user.lastName)})]}),Object(b.jsx)("div",{className:"comment-content",children:Object(b.jsx)("p",{children:e.content})})]},e.id)})),h&&Object(b.jsx)("li",{className:"detail-comment-loading",children:Object(b.jsx)("img",{src:"/images/cmtloading.gif"})})]})||Object(b.jsx)("p",{className:"detail-comemnt-list comment-alert",children:"There are not any comment. write your mind?"})}),Object(b.jsxs)("div",{className:"user-comment",children:[Object(b.jsx)("img",{src:O(t.user.userImage)}),Object(b.jsxs)("div",{className:"comment-input-container",children:[Object(b.jsx)(D.a,{ref:I,placeholder:"comment...",className:"comment-input"}),Object(b.jsx)("button",{onClick:function(){m(!0);var e=I.current.value,a={postId:i._id,content:e};P("POST","/api/posts/comment/".concat(i._id),a).then((function(e){if(e.data&&e.data.status){I.current.value="";var s=x;x.length>3&&(s=x.slice(1)),p([].concat(Object(R.a)(s),[Object(y.a)({user:{_id:t.user.userId,firstName:t.user.firstName,lastName:t.user.lastName,image:t.user.userImage}},a)]))}else"vui long dang nhap"===e.data.message&&c.replace({pathname:"/sign-in"})})).catch((function(e){return console.log(e)})).then((function(){return m(!1)}))},children:Object(b.jsx)("i",{className:"far fa-paper-plane"})})]})]})]}),k&&k.length>1&&Object(b.jsxs)("div",{className:"detail-relation-container",children:[Object(b.jsx)("p",{class:"relate",children:"Related posts"}),Object(b.jsx)("ul",{children:k.map((function(e,t){if(e._id!==i._id&&t<=5)return Object(b.jsx)("li",{children:Object(b.jsxs)("div",{className:"detail-relate-item-container",children:[Object(b.jsx)("div",{className:"detail-relate-thumb",children:Object(b.jsx)("a",{href:"/posts/".concat(e.slug),children:Object(b.jsx)("img",{src:O(e.image)})})}),Object(b.jsxs)("div",{className:"detail-relate-info",children:[Object(b.jsx)("a",{href:"/posts/".concat(e.slug),children:Object(b.jsx)("h2",{children:e.title})}),Object(b.jsxs)("div",{className:"detail-relate-author",children:[Object(b.jsx)("i",{className:"far fa-user"}),Object(b.jsx)("span",{children:"".concat(e.author&&e.author.firstName," ").concat(e.author&&e.author.lastName)})]})]})]})},e._id)}))}),Object(b.jsx)(r.b,{to:"/",class:"more",children:"see more"})]})]})]})})]})})})),ce=c(20),ae=function(e){e=(e=e.replace(/^\s+|\s+$/g,"")).toLowerCase();for(var t="a\xe1\xe0\u1ea3\u1ea1\xe3\u1eb3\u1eaf\u1eb7\u1eb1\u1eb5\xe2\u1ea5\u1ea7\u1ead\u1ea9\u1eabe\xe8\xe9\u1ebb\u1eb9\u1ebd\xea\u1ebf\u1ec1\u1ec5\u1ec3\u1ec7i\xed\u1ec9\u1ecb\u0129\xecy\u1ef3\u1ef9\u1ef7\u1ef5\xfdu\xf9\xfa\u1ee7\u1ee5\u0169\u01b0\u1ee9\u1eeb\u1eed\u1ef1\u0169o\xf3\xf2\u1ecf\u1ecd\xf5\xf4\u1ed1\u1ed3\u1ed5\u1ed9\u1ed7\u01a1\u1edb\u1edd\u1edf\u1ee3\xf5\u0111 /_,:;",c=0;c<t.length;c++)e=e.replace(new RegExp(t.charAt(c),"g"),"aaaaaaaaaaaaaaaaaeeeeeeeeeeeeiiiiiiyyyyyyuuuuuuuuuuuuooooooooooooooooood------".charAt(c));return e=e.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")},se=c(25),ne=c(26),ie=c.n(ne),re="Choose",le="Title",oe="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Erat ut facilisis rutrum donec tristique mauris est ac nunc. Eget nec, lorem mi libero accumsan",je="Category",de=function(){var e,t=Object(l.f)(),c=Object(a.useState)(le),s=Object(o.a)(c,2),n=s[0],i=s[1],j=Object(a.useState)(oe),d=Object(o.a)(j,2),u=d[0],h=d[1],m=Object(a.useState)(je),O=Object(o.a)(m,2),g=O[0],f=O[1],x=Object(a.useState)(""),p=Object(o.a)(x,2),v=p[0],N=p[1],S=Object(a.useState)({name:"",path:"/images/test/item.jpeg"}),y=Object(o.a)(S,2),k=y[0],w=y[1],C=Object(a.useState)([]),I=Object(o.a)(C,2),T=I[0],F=I[1],_=Object(a.useState)(!1),E=Object(o.a)(_,2),L=E[0],R=E[1],A=Object(a.useState)(""),D=Object(o.a)(A,2),B=D[0],G=D[1],M=Object(a.useRef)(null),U=Object(a.useRef)(null),Y=Object(a.useRef)(null),q=Object(a.useRef)(null),V=Object(a.useRef)(null);Object(a.useEffect)((function(){P("GET","/api/auth").then((function(e){e.data&&!e.data.status&&setTimeout((function(){t.replace({pathname:"/sign-in"})}),1e3)})).then((function(){P("GET","api/posts/create").then((function(e){e.data&&e.data.category&&F(e.data.category)}))})).catch((function(e){return console.log(e)}))}),[]);return Object(b.jsx)("div",{className:"create-post",children:Object(b.jsxs)("div",{className:"create-container",children:[Object(b.jsx)(r.b,{className:"back-to-home",to:"/",children:Object(b.jsx)("i",{className:"fas fa-arrow-left"})}),Object(b.jsx)("h1",{children:" Create your own post"}),Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-12 col-sm-12 col-md-12 col-lg-8 col-xl-8",children:Object(b.jsxs)("div",{className:"create-form",children:[Object(b.jsxs)("div",{className:"create-title",children:[Object(b.jsx)("label",{htmlFor:"create_title",children:"Title"}),Object(b.jsx)("input",{ref:M,onChange:function(e){!function(e){var t=e.target.value;""===t&&(t=le),i(t)}(e)},placeholder:"ex: How to create React app",id:"create_title"}),Object(b.jsx)("p",{children:"The title of the post, max 128 charecters"})]}),Object(b.jsxs)("div",{className:"create-category",children:[Object(b.jsx)("label",{htmlFor:"crate-cate-select",children:"Category:"}),Object(b.jsxs)("select",(e={required:!L,disabled:L,onChange:function(e){return function(e){var t=e.target.value;""===(t=JSON.parse(t)).name&&(t=je),f(t.name)}(e)},id:"create-cate-select",ref:U,name:"categories"},Object(ce.a)(e,"id","categories"),Object(ce.a)(e,"children",[Object(b.jsx)("option",{defaultValue:"",selected:!0,disabled:!0,hidden:!0,children:re}),T&&T.length>0&&T.map((function(e){return Object(b.jsx)("option",{value:JSON.stringify(e),children:e.name},e.id)}))||Object(b.jsx)("option",{defaultValue:"",disabled:!0,children:"Th\xeam m\u1edbi"})]),e)),Object(b.jsx)("label",{style:{marginLeft:20},htmlFor:"create-cate-create",children:"Create New"}),Object(b.jsx)("input",{required:!L,ref:q,onChange:function(e){var t=e.target.value;(t=t.trim()).length>0?(R(!0),f(t)):(U.current.value!==re?f(JSON.parse(U.current.value).name):f(je),R(!1))},id:"create-cate-create"})]}),Object(b.jsxs)("div",{className:"create-img",children:[Object(b.jsx)("label",{htmlFor:"create_image",children:"Thumbnail image"}),Object(b.jsx)("input",{onChange:function(e){var t=e.target.files[0];N(t);var c=new FileReader;c.onloadend=function(e){var t=c.result;w({name:"manh",path:t})},t&&t.type.match("image.*")&&c.readAsDataURL(t)},type:"file",id:"create_image"}),Object(b.jsx)("p",{children:"The main image of the post"})]}),Object(b.jsxs)("div",{className:"create-shortdesc",children:[Object(b.jsx)("label",{htmlFor:"create_shortdesc",children:"Short description"}),Object(b.jsx)("textarea",{ref:Y,onChange:function(e){!function(e){var t=e.target.value;""===t&&(t=oe),h(t)}(e)},id:"create_shortdesc"}),Object(b.jsx)("p",{children:"The short description on the thumb, , max 512 charecters "})]}),Object(b.jsxs)("div",{className:"create-source",children:[Object(b.jsx)("label",{htmlFor:"create_source",children:"Source"}),Object(b.jsx)("textarea",{ref:V,id:"create_source",placeholder:"if you share from another source"})]}),Object(b.jsxs)("div",{className:"create-content",children:[Object(b.jsx)("label",{htmlFor:"create_content",children:"Content"}),Object(b.jsx)(se.CKEditor,{className:"about",editor:ie.a,data:"<p>Type and edit your the content!</p>",onReady:function(e){},onChange:function(e,t){var c=t.getData();G(c)},onBlur:function(e,t){},onFocus:function(e,t){}}),Object(b.jsx)("p",{children:"The Content on the thumb"})]}),Object(b.jsx)("button",{onClick:function(e){e.preventDefault();var c=new FormData,a=M.current.value,s=Y.current.value,n=B,i=U.current.value,r=V.current.value.length>0&&V.current.value||null,l=q.current.value.length>0&&q.current.value||null,o=ae(a),j=i!==re&&JSON.parse(i);c.append("title",a),c.append("shortDesc",s),c.append("content",n),c.append("source",r),j&&c.append("categoryId",j._id),c.append("image",v),c.append("slug",o),l&&c.append("newCate",l),P("POST","/api/posts/create",c).then((function(e){e.data&&e.data.status?t.replace({pathname:"/"}):alert(e.data.message)})).catch((function(e){return console.log("this is err: ",e)}))},children:"Post"})]})}),Object(b.jsx)("div",{className:"col-12 col-sm-12 col-md-12 col-lg-4 col-xl-4",children:Object(b.jsx)("div",{className:"create-demo",children:Object(b.jsxs)("div",{className:"first-container",children:[Object(b.jsx)("div",{className:"first-thumb",children:Object(b.jsx)("img",{onError:"../images/test/item.jpeg",src:"".concat(k.path),alt:"img"})}),Object(b.jsxs)("div",{className:"first-infor",children:[Object(b.jsx)("p",{to:"/",className:"first-category",children:g}),Object(b.jsx)("span",{to:"/",className:"first-title",children:n}),Object(b.jsx)("p",{className:"first-desc",children:u})]})]})})})]})]})})},be={select:"choose"},ue=function(){var e,t=Object(l.h)().postId||null,c=Object(l.f)(),s=Object(a.useState)(be.title),n=Object(o.a)(s,2),i=n[0],j=n[1],d=Object(a.useState)(be.shortDesc),u=Object(o.a)(d,2),h=u[0],m=u[1],g=Object(a.useState)(be.category),f=Object(o.a)(g,2),x=f[0],p=f[1],v=Object(a.useState)(null),N=Object(o.a)(v,2),S=N[0],k=N[1],w=Object(a.useState)({name:"",path:"/images/defaultimg.jpg"}),C=Object(o.a)(w,2),I=C[0],T=C[1],F=Object(a.useState)([]),_=Object(o.a)(F,2),E=_[0],L=_[1],R=Object(a.useState)(!1),A=Object(o.a)(R,2),D=A[0],B=A[1],G=Object(a.useState)({}),M=Object(o.a)(G,2),U=M[0],Y=M[1],q=Object(a.useRef)(null),V=Object(a.useRef)(null),J=Object(a.useRef)(null),z=Object(a.useRef)(null),H=Object(a.useRef)(null),K=Object(a.useState)(""),$=Object(o.a)(K,2),Z=$[0],W=$[1];Object(a.useEffect)((function(){P("GET","/api/auth").then((function(e){e.data&&!e.data.status&&setTimeout((function(){c.replace({pathname:"/sign-in"})}),1e3)})).then((function(){P("GET","api/posts/create").then((function(e){e.data&&e.data.category&&L(e.data.category)}))})).catch((function(e){return console.log(e)})),P("GET","api/posts/update/".concat(t)).then((function(e){e.data&&e.data.status&&(Y(e.data.post),q.current.value=e.data.post.title,J.current.value=e.data.post.description,W(e.data.post.content),V.current.value=JSON.stringify(e.data.post.category),p(e.data.post.category&&e.data.post.category.name||"\u0110ang c\u1eadp nh\u1eadt"),j(e.data.post.title),m(e.data.post.description),T(Object(y.a)(Object(y.a)({},I),{},{path:O(e.data.post.image)})))})).catch((function(e){return console.log(e)}))}),[]);return Object(b.jsx)("div",{className:"create-post",children:Object(b.jsxs)("div",{className:"create-container",children:[Object(b.jsx)(r.b,{className:"back-to-home",to:"/",children:Object(b.jsx)("i",{className:"fas fa-arrow-left"})}),Object(b.jsx)("h1",{children:" Update your your post"}),Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-12 col-sm-12 col-md-12 col-lg-8 col-xl-8",children:Object(b.jsxs)("div",{className:"create-form",children:[Object(b.jsxs)("div",{className:"create-title",children:[Object(b.jsx)("label",{htmlFor:"create_title",children:"Title"}),Object(b.jsx)("input",{ref:q,onChange:function(e){!function(e){var t=e.target.value;""===t&&(t=U.title),j(t)}(e)},placeholder:"ex: How to create React app",id:"create_title"}),Object(b.jsx)("p",{children:"The title of the post, max 128 charecters"})]}),Object(b.jsxs)("div",{className:"create-category",children:[Object(b.jsx)("label",{htmlFor:"crate-cate-select",children:"Category:"}),Object(b.jsx)("select",(e={disabled:D,onChange:function(e){return function(e){var t=e.target.value;""===(t=JSON.parse(t)).name&&(t=U.category&&U.category.name||"\u0110ang c\u1eadp nh\u1eadt"),p(t.name)}(e)},id:"create-cate-select",ref:V,name:"categories"},Object(ce.a)(e,"id","categories"),Object(ce.a)(e,"children",E&&E.length>0&&E.map((function(e){return Object(b.jsx)("option",{selected:e.id===U.category&&U.category._id,value:JSON.stringify(e),children:e.name},e.id)}))||Object(b.jsx)("option",{defaultValue:"",disabled:!0,children:"Th\xeam m\u1edbi"})),e)),Object(b.jsx)("label",{style:{marginLeft:20},htmlFor:"create-cate-create",children:"Create New"}),Object(b.jsx)("input",{ref:z,onChange:function(e){var t=e.target.value;(t=t.trim()).length>0?(B(!0),p(t)):(V.current.value!==be.select&&p(JSON.parse(V.current.value).name),B(!1))},id:"create-cate-create"})]}),Object(b.jsxs)("div",{className:"create-img",children:[Object(b.jsx)("label",{htmlFor:"create_image",children:"Thumbnail image"}),Object(b.jsx)("input",{onChange:function(e){var t=e.target.files[0];k(t);var c=new FileReader;c.onloadend=function(e){var t=c.result;T({name:"manh",path:t})},t&&t.type.match("image.*")&&c.readAsDataURL(t)},type:"file",id:"create_image"}),Object(b.jsx)("p",{children:"The main image of the post"})]}),Object(b.jsxs)("div",{className:"create-shortdesc",children:[Object(b.jsx)("label",{htmlFor:"create_shortdesc",children:"Short description"}),Object(b.jsx)("textarea",{ref:J,onChange:function(e){!function(e){var t=e.target.value;""===t&&(t=U.description,e.target.value=JSON.stringify(U.category)),m(t)}(e)},id:"create_shortdesc"}),Object(b.jsx)("p",{children:"The short description on the thumb, , max 512 charecters "})]}),Object(b.jsxs)("div",{className:"create-source",children:[Object(b.jsx)("label",{htmlFor:"create_source",children:"Source"}),Object(b.jsx)("textarea",{ref:H,id:"create_source",placeholder:"if you share from another source"})]}),Object(b.jsxs)("div",{className:"create-content",children:[Object(b.jsx)("label",{htmlFor:"create_content",children:"Content"}),Object(b.jsx)(se.CKEditor,{className:"about",editor:ie.a,data:Z,onReady:function(e){},onChange:function(e,t){var c=t.getData();W(c)},onBlur:function(e,t){},onFocus:function(e,t){}}),Object(b.jsx)("p",{children:"The Content on the thumb"})]}),Object(b.jsx)("button",{onClick:function(e){e.preventDefault();var t=new FormData,a=q.current.value,s=J.current.value,n=H.current.value.length>0&&H.current.value||U.source,i=V.current.value,r=z.current.value.length>0&&z.current.value||null,l=ae(a),o=i!==be.select&&JSON.parse(i);t.append("title",a),t.append("shortDesc",s),t.append("content",Z),t.append("source",n),o&&t.append("categoryId",o._id),t.append("image",S||U.image),t.append("oldFile",U.image),t.append("author",U.author&&U.author._id),t.append("slug",l),r&&t.append("newCate",r),P("POST","/api/posts/update/".concat(U._id),t).then((function(e){e.data&&e.data.status?c.replace({pathname:"/"}):alert(e.data.message)})).catch((function(e){return console.log("this is err: ",e)}))},children:"Update"})]})}),Object(b.jsx)("div",{className:"col-12 col-sm-12 col-md-12 col-lg-4 col-xl-4",children:Object(b.jsx)("div",{className:"create-demo",children:Object(b.jsxs)("div",{className:"first-container",children:[Object(b.jsx)("div",{className:"first-thumb",children:Object(b.jsx)("img",{onerror:"../images/test/item.jpeg",src:I.path,alt:"img"})}),Object(b.jsxs)("div",{className:"first-infor",children:[Object(b.jsx)("p",{to:"/",className:"first-category",children:x}),Object(b.jsx)("span",{to:"/",className:"first-title",children:i}),Object(b.jsx)("p",{className:"first-desc",children:h})]})]})})})]})]})})},he={toggleLoading:N},me=Object(m.b)((function(e){return{web:e.web}}),he)((function(e){var t=new URLSearchParams(Object(l.g)().search).get("q"),c=ae(t),s=Object(a.useState)([]),n=Object(o.a)(s,2),i=n[0],r=n[1];return Object(a.useEffect)((function(){e.toggleLoading(),P("GET","api/search/".concat(c)).then((function(t){t.data&&t.data.status&&(r(t.data.posts),e.toggleLoading())}))}),[]),Object(b.jsx)(S,{children:i&&i.length>0&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"search-result",children:Object(b.jsxs)("p",{children:["Result for '",t,"' : "]})}),Object(b.jsx)(U,{posts:i,search:!0})]})||Object(b.jsx)("div",{className:"search-result",children:Object(b.jsxs)("p",{style:{color:"rgb(223, 83, 83)"},children:["No result for '",t,"'!"]})})})})),Oe=function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Using CKEditor 5 build in React"}),Object(b.jsx)(se.CKEditor,{className:"about",editor:ie.a,data:"<p>Hello from CKEditor 5!</p>",onReady:function(e){console.log("Editor is ready to use!",e)},onChange:function(e,t){var c=t.getData();console.log({event:e,editor:t,data:c})},onBlur:function(e,t){console.log("Blur.",t)},onFocus:function(e,t){console.log("Focus.",t)}})]})},ge={toggleLoading:N},fe=Object(m.b)((function(e){return{web:e.web}}),ge)((function(e){return Object(b.jsx)("div",{id:"page-loading",style:{display:e.web.loading?"block":"none"}})})),xe=c(33),pe={logged:localStorage.getItem("logged"),user:{firstName:localStorage.getItem("firstName"),lastName:localStorage.getItem("lastName"),userId:localStorage.getItem("userId"),userImage:localStorage.getItem("userImage"),userBio:localStorage.getItem("userBio")},loading:!1},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;if(t.type===p){var c=localStorage.getItem("userId"),a=localStorage.getItem("logged"),s=localStorage.getItem("firstName"),n=localStorage.getItem("lastName"),i=localStorage.getItem("userImage"),r=localStorage.getItem("userBio");return Object(y.a)(Object(y.a)({},e),{},{user:{firstName:s,lastName:n,userId:c,userImage:i,userBio:r},logged:a})}if(t.type===x){var l=e.loading;return Object(y.a)(Object(y.a)({},e),{},{loading:!l})}return e},Ne=Object(xe.b)({web:ve}),Se=Object(xe.c)(Ne);var ye=function(){return Object(b.jsx)(m.a,{store:Se,children:Object(b.jsx)(r.a,{children:Object(b.jsxs)("div",{className:"myblog",children:[Object(b.jsx)(fe,{}),Object(b.jsx)("div",{className:"container",children:Object(b.jsxs)(l.c,{children:[Object(b.jsx)(l.a,{path:"/sign-in",children:Object(b.jsx)(Z,{})}),Object(b.jsx)(l.a,{path:"/sign-up",children:Object(b.jsx)(Q,{})}),Object(b.jsx)(l.a,{path:"/me",children:Object(b.jsx)(X,{})}),Object(b.jsx)(l.a,{axact:!0,path:"/posts/update/:postId",children:Object(b.jsx)(ue,{})}),Object(b.jsx)(l.a,{axact:!0,path:"/posts/create",children:Object(b.jsx)(de,{})}),Object(b.jsx)(l.a,{path:"/posts/me",children:Object(b.jsx)(z,{})}),Object(b.jsx)(l.a,{path:"/posts/:title",children:Object(b.jsx)(te,{})}),Object(b.jsx)(l.a,{axact:!0,path:"/posts",children:Object(b.jsx)(V,{})}),Object(b.jsx)(l.a,{axact:!0,path:"/about",children:Object(b.jsx)(Oe,{})}),Object(b.jsx)(l.a,{axact:!0,path:"/search",children:Object(b.jsx)(me,{})}),Object(b.jsx)(l.a,{exact:!0,path:"/",children:Object(b.jsx)(L,{})})]})})]})})})},ke=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,173)).then((function(t){var c=t.getCLS,a=t.getFID,s=t.getFCP,n=t.getLCP,i=t.getTTFB;c(e),a(e),s(e),n(e),i(e)}))};i.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(ye,{})}),document.getElementById("root")),ke()},86:function(e,t,c){}},[[172,1,2]]]);
//# sourceMappingURL=main.d1aec2da.chunk.js.map